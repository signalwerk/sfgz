{"version":3,"sources":["signalwerk.js"],"names":["$","fn","serializeObject","o","a","serializeArray","each","name","undefined","push","value","jQuery","validator","addMethod","validateDate","element","matches","exec","trim","d","m","y","composedDate","Date","getDate","getMonth","getFullYear","squirrel","clear_on_submit","storage_key","is","show","hide","change","e","attr","removeAttr","validate","rules","required","email","chDate","depends","messages","submitHandler","form","ajax","type","url","data","success","msg","window","location","href","error","returnval"],"mappings":"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","file":"signalwerk.js","sourcesContent":["// http://stackoverflow.com/questions/1184624/convert-form-data-to-js-object-with-jquery\n$.fn.serializeObject = function() {\n  var o = {};\n  var a = this.serializeArray();\n  $.each(a, function() {\n    if (o[this.name] !== undefined) {\n      if (!o[this.name].push) {\n        o[this.name] = [o[this.name]];\n      }\n      o[this.name].push(this.value || '');\n    } else {\n      o[this.name] = this.value || '';\n    }\n  });\n  return o;\n};\n\n\njQuery.validator.addMethod(\"chDate\",\n\n  function validateDate(value, element) {\n      var matches = /^(\\d{2})[.](\\d{2})[.](\\d{4})$/.exec(value.trim());\n      if (matches == null) return false;\n      var d = matches[1];\n      var m = matches[2] - 1;\n      var y = matches[3] ;\n      var composedDate = new Date(y, m, d);\n\n      return composedDate.getDate() == d &&\n             composedDate.getMonth() == m &&\n             composedDate.getFullYear() == y;\n  }\n);\n\n\n\n// Wait for the DOM to be ready\n$(function() {\n\n  // form restore\n  $('#contact-form').squirrel('init', {\n    clear_on_submit: false,\n    storage_key: \"squirrel\"\n  });\n\n  if ($('input[name=\"--contact-form[bill_separate]\"]').is(':checked')) {\n    $(\".contact-form-bill\").show();\n  } else {\n    $(\".contact-form-bill\").hide();\n  }\n  $('input[name=\"--contact-form[bill_separate]\"]').change(function(e) {\n\n    if ($(this).is(':checked')) {\n      $(\".contact-form-bill\").show();\n      $(this).attr(\"checked\", \"checked\");\n    } else {\n      $(\".contact-form-bill\").hide();\n      $(this).removeAttr(\"checked\");\n    }\n  });\n\n  if ($('input[name=\"--contact-form[ausbildung]\"]').is(':checked')) {\n    $(\".contact-form-onSfGZ-group\").show();\n  } else {\n    $(\".contact-form-onSfGZ-group\").hide();\n  }\n  $('input[name=\"--contact-form[ausbildung]\"]').change(function(e) {\n\n    if ($(this).is(':checked')) {\n      $(\".contact-form-onSfGZ-group\").show();\n      $(this).attr(\"checked\", \"checked\");\n    } else {\n      $(\".contact-form-onSfGZ-group\").hide();\n      $(this).removeAttr(\"checked\");\n    }\n  });\n\n  // Initialize form validation on the registration form.\n  // It has the name attribute \"registration\"\n  $(\"#contact-form\").validate({\n    // Specify validation rules\n    rules: {\n      // The key name on the left side is the name attribute\n      // of an input field. Validation rules are defined\n      // on the right side\n      '--contact-form[anrede]': \"required\",\n      '--contact-form[Name]': \"required\",\n      '--contact-form[Vorname]': \"required\",\n      '--contact-form[Strasse]': \"required\",\n      '--contact-form[Postleitzahl]': \"required\",\n      '--contact-form[Ort]': \"required\",\n      '--contact-form[E-Mail]': {\n        required: true,\n        // Specify that email should be validated\n        // by the built-in \"email\" rule\n        email: true\n      },\n      '--contact-form[Geburtsdatum]': {\n        required: true,\n        chDate: true\n      },\n      '--contact-form[Berufstatigkeit]': \"required\",\n\n      '--contact-form[bill_Strasse]': {\n        required: {\n          depends: function(element) {\n            return $(\"#contact-form-bill-separate\").is(\":checked\");\n          }\n        }\n      },\n      '--contact-form[bill_Postleitzahl]': {\n        required: {\n          depends: function(element) {\n            return $(\"#contact-form-bill-separate\").is(\":checked\");\n          }\n        }\n      },\n      '--contact-form[bill_Ort]': {\n        required: {\n          depends: function(element) {\n            return $(\"#contact-form-bill-separate\").is(\":checked\");\n          }\n        }\n      },\n      '--contact-form[onSfGZ]': {\n        required: {\n          depends: function(element) {\n            return $(\"#contact-form-ausbildung\").is(\":checked\");\n          }\n        }\n      },\n      '--contact-form[agb]': \"required\",\n\n\n    },\n    // Specify validation error messages\n    messages: {\n      '--contact-form[anrede]': \"Bitte ausfüllen.\",\n      '--contact-form[Name]': \"Bitte ausfüllen.\",\n      '--contact-form[Vorname]': \"Bitte ausfüllen.\",\n      '--contact-form[Strasse]': \"Bitte ausfüllen.\",\n      '--contact-form[Postleitzahl]': \"Bitte ausfüllen.\",\n      '--contact-form[Ort]': \"Bitte ausfüllen.\",\n      '--contact-form[E-Mail]': \"Bitte ausfüllen.\",\n      '--contact-form[Geburtsdatum]': \"Bitte ausfüllen (TT.MM.JJJJ).\",\n      '--contact-form[Berufstatigkeit]': \"Bitte ausfüllen.\",\n      '--contact-form[bill_Strasse]': \"Bitte ausfüllen.\",\n      '--contact-form[bill_Postleitzahl]': \"Bitte ausfüllen.\",\n      '--contact-form[bill_Ort]': \"Bitte ausfüllen.\",\n      '--contact-form[onSfGZ]': \"Bitte Ausbildungsart wählen.\",\n      '--contact-form[agb]': \"Sie müssen die allgemeinen Geschäftsbedingungen akzeptieren\",\n    },\n\n    // Make sure the form is submitted to the destination defined\n    // in the \"action\" attribute of the form when valid\n    submitHandler: function(form) {\n      $.ajax({\n        type: \"POST\",\n        url: \"/signalwerk/course/enroll\",\n        data: {\n          'data': $('.form-control').serializeObject()\n        },\n        success: function(msg) {\n          window.location.href = './anmeldung/danke.html';\n        },\n        error: function(returnval) {\n          // window.location.href = './anmeldung/danke.html';\n          window.location.href = './anmeldung/error.html';\n        }\n      });\n    }\n  });\n});\n"]}