{"version":3,"sources":["signalwerkFrontend.js"],"names":["pad","n","width","z","length","Array","join","$","rng","Math","floor","random","addClass","click","toggleClass","next","children","createNewsGrid","navToggle","document","querySelector","navContent","addEventListener","event","classList","toggle","$extLinks","each","index","$this","isTargetBlank","attr","$body","store","localStorage","delta","lastPlayed","parseInt","animationLastPlayed","undefined","isTimeToPlay","Date","now","hasClass","setItem","jQuery","$grid","masonry","horizontalOrder","itemSelector","columnWidth","gutter","percentPosition","imagesLoaded","progress","instance","image","img","closest"],"mappings":";;AAAA;AACA,SAASA,GAAT,CAAaC,CAAb,EAAgBC,KAAhB,EAAuBC,CAAvB,EAA0B;AACxBA,MAAIA,KAAK,GAAT;AACAF,MAAIA,IAAI,EAAR;AACA,SAAOA,EAAEG,MAAF,IAAYF,KAAZ,GAAoBD,CAApB,GAAwB,IAAII,KAAJ,CAAUH,QAAQD,EAAEG,MAAV,GAAmB,CAA7B,EAAgCE,IAAhC,CAAqCH,CAArC,IAA0CF,CAAzE;AACD;;AAED,CAAC,UAASM,CAAT,EAAY;AACXA,IAAE,YAAW;;AAIX;AACA,QAAIC,MAAMC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgB,EAA3B,IAAiC,CAA3C;AACAJ,MAAE,MAAF,EAAUK,QAAV,CAAoB,WAAWZ,IAAIQ,GAAJ,EAAS,CAAT,CAA/B;;AAGA;AACAD,MAAE,gBAAF,EAAoBM,KAApB,CAA0B,YAAW;AACnCN,QAAE,IAAF,EAAQO,WAAR,CAAoB,QAApB,EAA8BC,IAA9B,GAAqCC,QAArC,CAA8C,kBAA9C,EAAkEF,WAAlE,CAA8E,MAA9E;AACD,KAFD;;AAIAG;;AAEA,QAAIC,YAAYC,SAASC,aAAT,CAAuB,qBAAvB,CAAhB;AACA,QAAIC,aAAaF,SAASC,aAAT,CAAuB,sBAAvB,CAAjB;;AAEAF,cAAUI,gBAAV,CAA2B,OAA3B,EAAoC,UAASC,KAAT,EAAgB;AAClDF,iBAAWG,SAAX,CAAqBC,MAArB,CAA4B,2BAA5B;AACD,KAFD;;AAIA;;AAEA,QAAIC,YAAYnB,EAAE,eAAF,CAAhB;;AAEAmB,cAAUC,IAAV,CAAe,UAASC,KAAT,EAAgB;AAC7B,UAAIC,QAAQtB,EAAE,IAAF,CAAZ;AACA,UAAIuB,gBAAgBD,MAAME,IAAN,CAAW,QAAX,MAAyB,QAA7C;;AAEA,UAAI,CAACD,aAAL,EAAoB;AAClBD,cAAME,IAAN,CAAW,QAAX,EAAqB,QAArB;AACD;AACF,KAPD;;AAUA;;AAEA,QAAIC,QAAQzB,EAAE,MAAF,CAAZ;AACA,QAAI0B,QAAQC,YAAZ;AACA;AACA,QAAIC,QAAQ,CAAZ,CA1CW,CA0CI;;AAEf,QAAIC,aAAaC,SAASJ,MAAMK,mBAAf,EAAoC,EAApC,CAAjB;AACA,QAAIL,MAAMK,mBAAN,KAA8BC,SAAlC,EAA6C;AAC3CH,mBAAa,CAAb;AACD;AACD,QAAII,eAAeJ,aAAaD,KAAb,GAAqBM,KAAKC,GAAL,EAAxC;;AAEA,QAAIV,MAAMW,QAAN,CAAe,cAAf,CAAJ,EAAoC;AAClC,UAAIH,YAAJ,EAAkB;AAChBP,cAAMW,OAAN,CAAc,qBAAd,EAAqCH,KAAKC,GAAL,EAArC;AACD,OAFD,MAEO;AACLV,cAAMpB,QAAN,CAAe,cAAf;AACD;AACF;AACF,GAzDD;AA0DD,CA3DD,EA2DGiC,MA3DH;;AA6DA,SAAS5B,cAAT,GAA0B;AACxB,MAAI6B,QAAQvC,EAAE,4BAAF,EAAgCwC,OAAhC,CAAwC;AAClDC,qBAAiB,IADiC;AAElDC,kBAAc,YAFoC;AAGlDC,iBAAa,mBAHqC;AAIlDC,YAAQ,oBAJ0C;AAKlDC,qBAAiB;AALiC,GAAxC,CAAZ;;AAQAN,QAAMO,YAAN,GACCC,QADD,CACU,UAASC,QAAT,EAAmBC,KAAnB,EAA0B;AAClCV,UAAMC,OAAN,CAAc,QAAd;AACAxC,MAAEiD,MAAMC,GAAR,EAAaC,OAAb,CAAqB,YAArB,EAAmC9C,QAAnC,CAA4C,yBAA5C;AACD,GAJD;AAKD","file":"signalwerkFrontend.js","sourcesContent":["// main\nfunction pad(n, width, z) {\n  z = z || '0';\n  n = n + '';\n  return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;\n}\n\n(function($) {\n  $(function() {\n\n\n\n    // add random class\n    var rng = Math.floor(Math.random() * 20) + 1 ;\n    $('body').addClass( 'random' + pad(rng, 2));\n\n\n    // foldout handling\n    $('.foldout-title').click(function() {\n      $(this).toggleClass('active').next().children('.foldout-content').toggleClass('show');\n    });\n\n    createNewsGrid();\n\n    var navToggle = document.querySelector('.navigation__toggle');\n    var navContent = document.querySelector('.navigation__content');\n\n    navToggle.addEventListener('click', function(event) {\n      navContent.classList.toggle('navigation__content--open');\n    });\n\n    // give all anchor tags with href beginning with \"http\" a target attribute of \"_blank\"\n\n    var $extLinks = $('a[href^=http]');\n\n    $extLinks.each(function(index) {\n      var $this = $(this);\n      var isTargetBlank = $this.attr('target') === '_blank';\n\n      if (!isTargetBlank) {\n        $this.attr('target', '_blank');\n      }\n    });\n\n\n    // background animation queing\n\n    var $body = $('body');\n    var store = localStorage;\n    // var delta = 259200000; // 3 days -> ms\n    var delta = 0; // deactivate right now\n\n    var lastPlayed = parseInt(store.animationLastPlayed, 10);\n    if (store.animationLastPlayed === undefined) {\n      lastPlayed = 0;\n    }\n    var isTimeToPlay = lastPlayed + delta < Date.now();\n\n    if ($body.hasClass('noBackground')) {\n      if (isTimeToPlay) {\n        store.setItem('animationLastPlayed', Date.now());\n      } else {\n        $body.addClass('no-animation');\n      }\n    }\n  });\n})(jQuery);\n\nfunction createNewsGrid() {\n  var $grid = $('.columns-masonry > .column').masonry({\n    horizontalOrder: true,\n    itemSelector: '.news-item',\n    columnWidth: '.news-item__sizer',\n    gutter: '.news-item__gutter',\n    percentPosition: true\n  });\n\n  $grid.imagesLoaded()\n  .progress(function(instance, image) {\n    $grid.masonry('layout');\n    $(image.img).closest('.news-item').addClass('news-item--image-loaded');\n  });\n}\n"]}